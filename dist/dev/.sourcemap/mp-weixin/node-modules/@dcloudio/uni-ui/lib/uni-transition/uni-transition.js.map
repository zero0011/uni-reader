{"version":3,"sources":["webpack:///./node_modules/@dcloudio/uni-ui/lib/uni-transition/uni-transition.vue?a647","webpack:///./node_modules/@dcloudio/uni-ui/lib/uni-transition/uni-transition.vue?cc50","webpack:///./node_modules/@dcloudio/uni-ui/lib/uni-transition/uni-transition.vue?dc53","webpack:///./node_modules/@dcloudio/uni-ui/lib/uni-transition/uni-transition.vue?ce9c","uni-app:///node_modules/@dcloudio/uni-ui/lib/uni-transition/uni-transition.vue"],"names":["_createAnimation","require","ownKeys","e","r","t","Object","keys","getOwnPropertySymbols","o","filter","getOwnPropertyDescriptor","enumerable","push","apply","_objectSpread","arguments","length","forEach","_defineProperty2","default","getOwnPropertyDescriptors","defineProperties","defineProperty","_default2","exports","name","emits","props","show","type","Boolean","modeClass","Array","String","_default","duration","Number","styles","customClass","onceRender","data","isShow","transform","opacity","animationData","durationTime","config","watch","handler","newVal","open","close","immediate","computed","stylesObject","i","line","toLine","transformStyles","created","timingFunction","transformOrigin","delay","methods","init","obj","undefined","animation","createAnimation","assign","onClick","$emit","detail","step","_typeof2","_this$animation","_toConsumableArray2","console","error","concat","run","fn","_this","clearTimeout","timer","_this$styleInit","styleInit","$nextTick","setTimeout","tranfromInit","_this2","_this2$styleInit","_this3","buildStyle","mode","animationType","_this4","buildTranfrom","aniNum","animationMode","fade","replace","toLowerCase"],"mappings":"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","file":"node-modules/@dcloudio/uni-ui/lib/uni-transition/uni-transition.js","sourcesContent":["import { render, staticRenderFns, recyclableRender, components } from \"./uni-transition.vue?vue&type=template&id=73b1fe06&\"\nvar renderjs\nimport script from \"./uni-transition.vue?vue&type=script&lang=js&\"\nexport * from \"./uni-transition.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../vue-cli-plugin-uni/packages/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null,\n  false,\n  components,\n  renderjs\n)\n\ncomponent.options.__file = \"node_modules/@dcloudio/uni-ui/lib/uni-transition/uni-transition.vue\"\nexport default component.exports","export * from \"-!../../../vue-cli-plugin-uni/packages/vue-loader/lib/loaders/templateLoader.js??vue-loader-options!../../../vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--15-0!../../../webpack-uni-mp-loader/lib/template.js!../../../vue-cli-plugin-uni/packages/webpack-uni-app-loader/page-meta.js!../../../vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../webpack-uni-mp-loader/lib/style.js!./uni-transition.vue?vue&type=template&id=73b1fe06&\"","var components\nvar render = function () {\n  var _vm = this\n  var _h = _vm.$createElement\n  var _c = _vm._self._c || _h\n}\nvar recyclableRender = false\nvar staticRenderFns = []\nrender._withStripped = true\n\nexport { render, staticRenderFns, recyclableRender, components }","import mod from \"-!../../../../babel-loader/lib/index.js!../../../vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--13-1!../../../webpack-uni-mp-loader/lib/script.js!../../../vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../webpack-uni-mp-loader/lib/style.js!./uni-transition.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../../babel-loader/lib/index.js!../../../vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--13-1!../../../webpack-uni-mp-loader/lib/script.js!../../../vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../webpack-uni-mp-loader/lib/style.js!./uni-transition.vue?vue&type=script&lang=js&\"","<template>\r\n  <!-- #ifndef APP-NVUE -->\r\n  <view v-show=\"isShow\" ref=\"ani\" :animation=\"animationData\" :class=\"customClass\" :style=\"transformStyles\" @click=\"onClick\"><slot></slot></view>\r\n  <!-- #endif -->\r\n  <!-- #ifdef APP-NVUE -->\r\n  <view v-if=\"isShow\" ref=\"ani\" :animation=\"animationData\" :class=\"customClass\" :style=\"transformStyles\" @click=\"onClick\"><slot></slot></view>\r\n  <!-- #endif -->\r\n</template>\r\n\r\n<script>\r\nimport { createAnimation } from './createAnimation'\r\n\r\n/**\r\n * Transition 过渡动画\r\n * @description 简单过渡动画组件\r\n * @tutorial https://ext.dcloud.net.cn/plugin?id=985\r\n * @property {Boolean} show = [false|true] 控制组件显示或隐藏\r\n * @property {Array|String} modeClass = [fade|slide-top|slide-right|slide-bottom|slide-left|zoom-in|zoom-out] 过渡动画类型\r\n *  @value fade 渐隐渐出过渡\r\n *  @value slide-top 由上至下过渡\r\n *  @value slide-right 由右至左过渡\r\n *  @value slide-bottom 由下至上过渡\r\n *  @value slide-left 由左至右过渡\r\n *  @value zoom-in 由小到大过渡\r\n *  @value zoom-out 由大到小过渡\r\n * @property {Number} duration 过渡动画持续时间\r\n * @property {Object} styles 组件样式，同 css 样式，注意带’-‘连接符的属性需要使用小驼峰写法如：`backgroundColor:red`\r\n */\r\nexport default {\r\n\tname: 'uniTransition',\r\n\temits:['click','change'],\r\n\tprops: {\r\n\t\tshow: {\r\n\t\t\ttype: Boolean,\r\n\t\t\tdefault: false\r\n\t\t},\r\n\t\tmodeClass: {\r\n\t\t\ttype: [Array, String],\r\n\t\t\tdefault() {\r\n\t\t\t\treturn 'fade'\r\n\t\t\t}\r\n\t\t},\r\n\t\tduration: {\r\n\t\t\ttype: Number,\r\n\t\t\tdefault: 300\r\n\t\t},\r\n\t\tstyles: {\r\n\t\t\ttype: Object,\r\n\t\t\tdefault() {\r\n\t\t\t\treturn {}\r\n\t\t\t}\r\n\t\t},\r\n\t\tcustomClass:{\r\n\t\t\ttype: String,\r\n\t\t\tdefault: ''\r\n\t\t},\r\n\t\tonceRender:{\r\n\t\t\ttype:Boolean,\r\n\t\t\tdefault:false\r\n\t\t},\r\n\t},\r\n\tdata() {\r\n\t\treturn {\r\n\t\t\tisShow: false,\r\n\t\t\ttransform: '',\r\n\t\t\topacity: 1,\r\n\t\t\tanimationData: {},\r\n\t\t\tdurationTime: 300,\r\n\t\t\tconfig: {}\r\n\t\t}\r\n\t},\r\n\twatch: {\r\n\t\tshow: {\r\n\t\t\thandler(newVal) {\r\n\t\t\t\tif (newVal) {\r\n\t\t\t\t\tthis.open()\r\n\t\t\t\t} else {\r\n\t\t\t\t\t// 避免上来就执行 close,导致动画错乱\r\n\t\t\t\t\tif (this.isShow) {\r\n\t\t\t\t\t\tthis.close()\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t},\r\n\t\t\timmediate: true\r\n\t\t}\r\n\t},\r\n\tcomputed: {\r\n\t\t// 生成样式数据\r\n\t\tstylesObject() {\r\n\t\t\tlet styles = {\r\n\t\t\t\t...this.styles,\r\n\t\t\t\t'transition-duration': this.duration / 1000 + 's'\r\n\t\t\t}\r\n\t\t\tlet transform = ''\r\n\t\t\tfor (let i in styles) {\r\n\t\t\t\tlet line = this.toLine(i)\r\n\t\t\t\ttransform += line + ':' + styles[i] + ';'\r\n\t\t\t}\r\n\t\t\treturn transform\r\n\t\t},\r\n\t\t// 初始化动画条件\r\n\t\ttransformStyles() {\r\n\t\t\treturn 'transform:' + this.transform + ';' + 'opacity:' + this.opacity + ';' + this.stylesObject\r\n\t\t}\r\n\t},\r\n\tcreated() {\r\n\t\t// 动画默认配置\r\n\t\tthis.config = {\r\n\t\t\tduration: this.duration,\r\n\t\t\ttimingFunction: 'ease',\r\n\t\t\ttransformOrigin: '50% 50%',\r\n\t\t\tdelay: 0\r\n\t\t}\r\n\t\tthis.durationTime = this.duration\r\n\t},\r\n\tmethods: {\r\n\t\t/**\r\n\t\t *  ref 触发 初始化动画\r\n\t\t */\r\n\t\tinit(obj = {}) {\r\n\t\t\tif (obj.duration) {\r\n\t\t\t\tthis.durationTime = obj.duration\r\n\t\t\t}\r\n\t\t\tthis.animation = createAnimation(Object.assign(this.config, obj),this)\r\n\t\t},\r\n\t\t/**\r\n\t\t * 点击组件触发回调\r\n\t\t */\r\n\t\tonClick() {\r\n\t\t\tthis.$emit('click', {\r\n\t\t\t\tdetail: this.isShow\r\n\t\t\t})\r\n\t\t},\r\n\t\t/**\r\n\t\t * ref 触发 动画分组\r\n\t\t * @param {Object} obj\r\n\t\t */\r\n\t\tstep(obj, config = {}) {\r\n\t\t\tif (!this.animation) return\r\n\t\t\tfor (let i in obj) {\r\n\t\t\t\ttry {\r\n\t\t\t\t\tif(typeof obj[i] === 'object'){\r\n\t\t\t\t\t\tthis.animation[i](...obj[i])\r\n\t\t\t\t\t}else{\r\n\t\t\t\t\t\tthis.animation[i](obj[i])\r\n\t\t\t\t\t}\r\n\t\t\t\t} catch (e) {\r\n\t\t\t\t\tconsole.error(`方法 ${i} 不存在`)\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\tthis.animation.step(config)\r\n\t\t\treturn this\r\n\t\t},\r\n\t\t/**\r\n\t\t *  ref 触发 执行动画\r\n\t\t */\r\n\t\trun(fn) {\r\n\t\t\tif (!this.animation) return\r\n\t\t\tthis.animation.run(fn)\r\n\t\t},\r\n\t\t// 开始过度动画\r\n\t\topen() {\r\n\t\t\tclearTimeout(this.timer)\r\n\t\t\tthis.transform = ''\r\n\t\t\tthis.isShow = true\r\n\t\t\tlet { opacity, transform } = this.styleInit(false)\r\n\t\t\tif (typeof opacity !== 'undefined') {\r\n\t\t\t\tthis.opacity = opacity\r\n\t\t\t}\r\n\t\t\tthis.transform = transform\r\n\t\t\t// 确保动态样式已经生效后，执行动画，如果不加 nextTick ，会导致 wx 动画执行异常\r\n\t\t\tthis.$nextTick(() => {\r\n\t\t\t\t// TODO 定时器保证动画完全执行，目前有些问题，后面会取消定时器\r\n\t\t\t\tthis.timer = setTimeout(() => {\r\n\t\t\t\t\tthis.animation = createAnimation(this.config, this)\r\n\t\t\t\t\tthis.tranfromInit(false).step()\r\n\t\t\t\t\tthis.animation.run()\r\n\t\t\t\t\tthis.$emit('change', {\r\n\t\t\t\t\t\tdetail: this.isShow\r\n\t\t\t\t\t})\r\n\t\t\t\t}, 20)\r\n\t\t\t})\r\n\t\t},\r\n\t\t// 关闭过度动画\r\n\t\tclose(type) {\r\n\t\t\tif (!this.animation) return\r\n\t\t\tthis.tranfromInit(true)\r\n\t\t\t\t.step()\r\n\t\t\t\t.run(() => {\r\n\t\t\t\t\tthis.isShow = false\r\n\t\t\t\t\tthis.animationData = null\r\n\t\t\t\t\tthis.animation = null\r\n\t\t\t\t\tlet { opacity, transform } = this.styleInit(false)\r\n\t\t\t\t\tthis.opacity = opacity || 1\r\n\t\t\t\t\tthis.transform = transform\r\n\t\t\t\t\tthis.$emit('change', {\r\n\t\t\t\t\t\tdetail: this.isShow\r\n\t\t\t\t\t})\r\n\t\t\t\t})\r\n\t\t},\r\n\t\t// 处理动画开始前的默认样式\r\n\t\tstyleInit(type) {\r\n\t\t\tlet styles = {\r\n\t\t\t\ttransform: ''\r\n\t\t\t}\r\n\t\t\tlet buildStyle = (type, mode) => {\r\n\t\t\t\tif (mode === 'fade') {\r\n\t\t\t\t\tstyles.opacity = this.animationType(type)[mode]\r\n\t\t\t\t} else {\r\n\t\t\t\t\tstyles.transform += this.animationType(type)[mode] + ' '\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\tif (typeof this.modeClass === 'string') {\r\n\t\t\t\tbuildStyle(type, this.modeClass)\r\n\t\t\t} else {\r\n\t\t\t\tthis.modeClass.forEach(mode => {\r\n\t\t\t\t\tbuildStyle(type, mode)\r\n\t\t\t\t})\r\n\t\t\t}\r\n\t\t\treturn styles\r\n\t\t},\r\n\t\t// 处理内置组合动画\r\n\t\ttranfromInit(type) {\r\n\t\t\tlet buildTranfrom = (type, mode) => {\r\n\t\t\t\tlet aniNum = null\r\n\t\t\t\tif (mode === 'fade') {\r\n\t\t\t\t\taniNum = type ? 0 : 1\r\n\t\t\t\t} else {\r\n\t\t\t\t\taniNum = type ? '-100%' : '0'\r\n\t\t\t\t\tif (mode === 'zoom-in') {\r\n\t\t\t\t\t\taniNum = type ? 0.8 : 1\r\n\t\t\t\t\t}\r\n\t\t\t\t\tif (mode === 'zoom-out') {\r\n\t\t\t\t\t\taniNum = type ? 1.2 : 1\r\n\t\t\t\t\t}\r\n\t\t\t\t\tif (mode === 'slide-right') {\r\n\t\t\t\t\t\taniNum = type ? '100%' : '0'\r\n\t\t\t\t\t}\r\n\t\t\t\t\tif (mode === 'slide-bottom') {\r\n\t\t\t\t\t\taniNum = type ? '100%' : '0'\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t\tthis.animation[this.animationMode()[mode]](aniNum)\r\n\t\t\t}\r\n\t\t\tif (typeof this.modeClass === 'string') {\r\n\t\t\t\tbuildTranfrom(type, this.modeClass)\r\n\t\t\t} else {\r\n\t\t\t\tthis.modeClass.forEach(mode => {\r\n\t\t\t\t\tbuildTranfrom(type, mode)\r\n\t\t\t\t})\r\n\t\t\t}\r\n\r\n\t\t\treturn this.animation\r\n\t\t},\r\n\t\tanimationType(type) {\r\n\t\t\treturn {\r\n\t\t\t\tfade: type ? 1 : 0,\r\n\t\t\t\t'slide-top': `translateY(${type ? '0' : '-100%'})`,\r\n\t\t\t\t'slide-right': `translateX(${type ? '0' : '100%'})`,\r\n\t\t\t\t'slide-bottom': `translateY(${type ? '0' : '100%'})`,\r\n\t\t\t\t'slide-left': `translateX(${type ? '0' : '-100%'})`,\r\n\t\t\t\t'zoom-in': `scaleX(${type ? 1 : 0.8}) scaleY(${type ? 1 : 0.8})`,\r\n\t\t\t\t'zoom-out': `scaleX(${type ? 1 : 1.2}) scaleY(${type ? 1 : 1.2})`\r\n\t\t\t}\r\n\t\t},\r\n\t\t// 内置动画类型与实际动画对应字典\r\n\t\tanimationMode() {\r\n\t\t\treturn {\r\n\t\t\t\tfade: 'opacity',\r\n\t\t\t\t'slide-top': 'translateY',\r\n\t\t\t\t'slide-right': 'translateX',\r\n\t\t\t\t'slide-bottom': 'translateY',\r\n\t\t\t\t'slide-left': 'translateX',\r\n\t\t\t\t'zoom-in': 'scale',\r\n\t\t\t\t'zoom-out': 'scale'\r\n\t\t\t}\r\n\t\t},\r\n\t\t// 驼峰转中横线\r\n\t\ttoLine(name) {\r\n\t\t\treturn name.replace(/([A-Z])/g, '-$1').toLowerCase()\r\n\t\t}\r\n\t}\r\n}\r\n</script>\r\n\r\n<style></style>\r\n"],"sourceRoot":""}